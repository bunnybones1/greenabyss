var defaults = require('lodash.defaults');
const THREE = require('three');
var Geometry = require('./Geometry');
var Material = require('materials/TemporalColorStripPointMaterial');

var __defaultParams = {
	mapFrameHeight: 5, 
	mapFrames: 48, 
	mapTotalHeight: 256, 
	total: 1000,
	iterations: 10,
	pointScale: 10000,
	sizeMin: 0.25,
	sizeMax: 1,
	radius: 80
};

function Stars(params) {
	params = defaults(params, __defaultParams);
	var geometry = new Geometry({
		total: params.total,
		radius: params.radius,
		sizeMin: params.sizeMin,
		sizeMax: params.sizeMax,
	});
	var material = new Material({
		mapTexture: params.mapTexture,
		mapFrameHeight: params.mapFrameHeight, 
		mapFrames: params.mapFrames, 
		mapTotalHeight: params.mapTotalHeight,
		pointScale: params.pointScale,
		uvOffsetY: 1 / params.mapTotalHeight
	});

	THREE.Points.call(this, geometry, material);
}

Stars.prototype = Object.create(THREE.Points.prototype);

module.exports = Stars;