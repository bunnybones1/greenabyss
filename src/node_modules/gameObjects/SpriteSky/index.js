var defaults = require('lodash.defaults');

var THREE = require('three');

var SpriteSkyGeometry = require('./Geometry');
var Material = require('./Material');

var __defaultParams = {
	radius: 80,
	overHang: 0.15,
	horizonLine: 0.5,
	mapFrameHeight: 4, 
	mapFrames: 48, 
	mapTotalHeight: 256, 
};

function SpriteSky(params) {
	params = defaults(params, __defaultParams);

	THREE.Mesh.call(
		this, 
		new SpriteSkyGeometry({
			mapFrameHeight: params.mapFrameHeight,
			mapTotalHeight: params.mapTotalHeight,
			radius: params.radius,
			overHang: params.overHang,
			horizonLine: params.horizonLine
		}), 
		new Material({
			mapTexture: params.mapTexture,
			mapFrameHeight: 4, 
			mapFrames: 48, 
			mapTotalHeight: 256
		})
	);
}

SpriteSky.prototype = Object.create(THREE.Mesh.prototype);

module.exports = SpriteSky;