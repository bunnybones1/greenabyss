var defaults = require('lodash.defaults');

var THREE = require('three');

var SpriteSunGeometry = require('./Geometry');
var Material = require('materials/TemporalColorStripMaterial');

var __defaultParams = {
	mapFrameHeight: 5, 
	mapFrames: 48, 
	mapTotalHeight: 256,
	radius: 80
};

function SpriteSun(params) {
	params = defaults(params, __defaultParams);

	THREE.Mesh.call(
		this, 
		new SpriteSunGeometry({
			mapFrameTop: 2,
			mapFrameBottom: 3,
			mapTotalHeight: params.mapTotalHeight,
			radius: params.radius
		}), 
		new Material({
			mapTexture: params.mapTexture,
			mapFrameHeight: params.mapFrameHeight, 
			mapFrames: params.mapFrames, 
			mapTotalHeight: params.mapTotalHeight
		})
	);
}

SpriteSun.prototype = Object.create(THREE.Mesh.prototype);

module.exports = SpriteSun;