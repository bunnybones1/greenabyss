var defaults = require('lodash.defaults');

var THREE = require('three');

var SpriteSunGeometry = require('./Geometry');
var Material = require('materials/TemporalColorStripMaterial');

var __defaultParams = {
	radius: 80,
	overHang: 0.15,
	horizonLine: 0.5,
	mapFrameHeight: 5, 
	mapFrames: 48, 
	mapTotalHeight: 256, 
};

function SpriteSun(params) {
	params = defaults(params, __defaultParams);

	THREE.Mesh.call(
		this, 
		new SpriteSunGeometry({
			mapFrameTop: 0,
			mapFrameBottom: 1,
			mapTotalHeight: params.mapTotalHeight,
			radius: params.radius,
			overHang: params.overHang,
			horizonLine: params.horizonLine
		}), 
		new Material({
			mapTexture: params.mapTexture,
			mapFrameHeight: params.mapFrameHeight, 
			mapFrames: params.mapFrames, 
			mapTotalHeight: params.mapTotalHeight
		})
	);
}

SpriteSun.prototype = Object.create(THREE.Mesh.prototype);

module.exports = SpriteSun;